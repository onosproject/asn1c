# Extracting protobuf from ASN.1

This project adds a -B option to output .proto files from ASN.1
(work in progress).

This approach generates protobufs like XSD is generated from asn1c.


For a very rudimentary conversion try:
```bash
./asn1c/asn1c -B examples/rectangle.asn
# Protobuf generated by asn1c-0.9.29 -->
# ASN.1 module RectangleModule from in examples/rectangle.asn

syntax = "proto3";

package rectangle;

message Rectangle {
    int32 height = 1;
    int32 width = 2;
}
```

For something a bit fancier try
> Needs to be fixed
```bash
./asn1c/asn1c -B tests/tests-asn1c-compiler/139-component-relation-OK.asn1
# Protobuf generated by asn1c-0.9.29 -->
# ASN.1 module ModuleComponentRelationConstraint from in tests/tests-asn1c-compiler/139-component-relation-OK.asn1
# OID:{ iso org(3) dod(6) internet(1) private(4)
	enterprise(1) spelio(9363) software(1) asn1c(5) test(1) 139 }
syntax = "proto3";

package modulecomponentrelationconstraint;

message Frame {
     ident = 1;
     value = 2;
    # Extensible *
}

message FRAME-STRUCTURE {
&id = 1;
&Type = 2;
}

message PrimitiveMessage {
 EMPTY value = 1;
}

message ComplexMessage {
 EMPTY value = 1;
}

```

To go all out on the E2AP ASN.1 model try
```bash
./asn1c/asn1c -B examples/e2ap-v01.00.00.asn 
WARNING: Parameterized type maxProtocolIEs expected for maxProtocolIEs at line 1543 in examples/e2ap-v01.00.00.asn
<repeated>
# Protobuf generated by asn1c-0.9.29 -->
# ASN.1 module E2AP-PDU-Descriptions { iso(1) identified-organization(3) dod(6) internet(1)
	private(4) enterprise(1) 53148 e2(1) version1(1) e2ap(1)
	e2ap-PDU-Descriptions(0) }
from in examples/e2ap-v01.00.00.asn

syntax = "proto3";

package e2ctypes;

message E2AP-ELEMENTARY-PROCEDURE {
&InitiatingMessage = 1;
&SuccessfulOutcome = 2;
&UnsuccessfulOutcome = 3;
&procedureCode = 4;
&criticality = 5;
}

...continues for 100s of lines
```